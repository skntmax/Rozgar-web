!function(t){var e,a=t();t.fn.sortable=function(r){var n=String(r);return r=t.extend({connectWith:!1},r),this.each((function(){if(/^(?:enable|disable|destroy)$/.test(n)){var i=t(this).children(t(this).data("items")).attr("draggable","enable"==n);"destroy"==n&&i.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s")}else{i=t(this).children(r.items);var s,d,o=t("<"+(/^(?:ul|ol)$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');i.find(r.handle).mousedown((function(){s=!0})).mouseup((function(){s=!1})),t(this).data("items",r.items),a=a.add(o),r.connectWith&&t(r.connectWith).add(this).data("connectWith",r.connectWith),i.attr("draggable","true").on("dragstart.h5s",(function(a){if(r.handle&&!s)return!1;s=!1;var n=a.originalEvent.dataTransfer;n.effectAllowed="move",n.setData("Text","dummy"),d=(e=t(this)).addClass("sortable-dragging").index()})).on("dragend.h5s",(function(){e&&(e.removeClass("sortable-dragging").show(),a.detach(),d!=e.index()&&e.parent().trigger("sortupdate",{item:e}),e=null)})).not("a[href], img").on("selectstart.h5s",(function(){return this.dragDrop&&this.dragDrop(),!1})).end().add([this,o]).on("dragover.h5s dragenter.h5s drop.h5s",(function(n){return!i.is(e)&&r.connectWith!==t(e).parent().data("connectWith")||("drop"==n.type?(n.stopPropagation(),a.filter(":visible").after(e),e.trigger("dragend.h5s"),!1):(n.preventDefault(),n.originalEvent.dataTransfer.dropEffect="move",i.is(this)?(r.forcePlaceholderSize&&o.height(e.outerHeight()),e.hide(),t(this)[o.index()<t(this).index()?"after":"before"](o),a.not(o).detach()):a.is(this)||t(this).children(r.items).length||(a.detach(),t(this).append(o)),!1))}))}}))}}(jQuery);